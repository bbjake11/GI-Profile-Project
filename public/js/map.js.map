{"version":3,"file":"/js/map.js","mappings":"uBAEIA,EACAC,EACAC,IAAY,GA8EhBC,OAAOC,QA5EP,WAC+B,IAAIC,OAAOC,KAAKC,mBAI/C,SAAkCC,EAAmBC,GACjD,IAAMC,EAAWC,QAAQC,KAAI,SAACD,GAAO,OAwDXE,EAxDqCF,EAyDxD,IAAIG,SAAQ,SAACC,EAASC,IACR,IAAIX,OAAOC,KAAKW,UACxBC,QAAQ,CAAEL,QAASA,IAAW,SAACM,EAASC,GAC7C,GAAIA,IAAWf,OAAOC,KAAKe,eAAeC,IAAMH,EAAQI,OAAS,EAAG,CAChE,IAAMC,EAAWL,EAAQ,GAAGM,SAASD,SACrCT,EAAQS,EACZ,MAEIR,EAAO,IAAIU,MAAM,yBAA2BN,GAEpD,GACJ,IAZJ,IAA8BP,CAxD6C,IACvEC,QAAQa,IAAIjB,GACPkB,MAAK,SAACC,GACP,IAAIC,EAAIC,EACRF,EAAUG,SAAQ,SAACR,EAAUS,GACrBT,IACiBA,EAASU,MACRV,EAASW,MAEnC,IAQA,IAPA,IAAMC,EAA0B,OAAjBP,EAAU,GAAcA,EAAU,QAAKQ,EAEhDzB,EAAM,IAAIP,OAAOC,KAAKgC,IAAIC,SAASC,cAAc,gBAAiB,CACpEC,KAAM,GACNL,OAAQA,EACRM,kBAAkB,IAEbT,EAAQ,EAAGA,EAAQJ,EAAUN,OAAQU,IAC1C,GAAc,IAAVA,EACAjC,EAAS6B,EAAUI,QAElB,GAAIA,IAAUJ,EAAUN,OAAS,EAClCtB,EAAc4B,EAAUI,OAEvB,CACD,IAAMU,EAAW,CACbnB,SAAU,IAAInB,OAAOC,KAAKsC,OAAmC,QAA3Bd,EAAKD,EAAUI,UAA2B,IAAPH,OAAgB,EAASA,EAAGI,MAAmC,QAA3BH,EAAKF,EAAUI,UAA2B,IAAPF,OAAgB,EAASA,EAAGI,OACxKU,UAAU,GAEd3C,EAAU4C,KAAKH,EACnB,CAGJnC,EAAkBuC,MAAM,CACpB/C,OAAQA,EACRC,YAAaA,EACbC,UAAWA,EACX8C,WAAY3C,OAAOC,KAAK2C,WAAWC,UACpC,SAAUC,EAAU/B,GACnB,GAAIA,IAAWf,OAAOC,KAAK8C,iBAAiB9B,GAAI,CAE5C,IAAM+B,EAAqB,IAAIhD,OAAOC,KAAKC,mBAC3C8C,EAAmBC,cAAcH,GACjCE,EAAmBE,OAAO3C,EAC9B,MAEIT,OAAOqD,MAAM,oCAAsCpC,EAE3D,GACJ,IAAE,OACS,SAACqC,GACRC,QAAQD,MAAMA,EAClB,GACJ,CAxDIE,CAD0B,IAAItD,OAAOC,KAAKsD,kBAE9C,C","sources":["webpack:///./resources/ts/map.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet origin;\nlet destination;\nlet waypoints = [];\n// Initialize and add the map\nfunction initMap() {\n    const directionsRenderer = new google.maps.DirectionsRenderer();\n    const directionsService = new google.maps.DirectionsService();\n    calculateAndDisplayRoute(directionsService, directionsRenderer);\n}\nfunction calculateAndDisplayRoute(directionsService, _directionsRenderer) {\n    const promises = gm_plan.map((gm_plan) => getLatLngFromAddress(gm_plan));\n    Promise.all(promises)\n        .then((locations) => {\n        var _a, _b;\n        locations.forEach((location, index) => {\n            if (location) {\n                const latitude = location.lat();\n                const longitude = location.lng();\n            }\n        });\n        const center = locations[0] !== null ? locations[0] : undefined;\n        // const map = new google.maps.Map(document.getElementById(\"map\") as HTMLElement,\n        const map = new google.maps.Map(document.querySelector(`[id^='map_']`), {\n            zoom: 14,\n            center: center,\n            disableDefaultUI: true,\n        });\n        for (let index = 0; index < locations.length; index++) {\n            if (index === 0) {\n                origin = locations[index];\n            }\n            else if (index === locations.length - 1) {\n                destination = locations[index];\n            }\n            else {\n                const waypoint = {\n                    location: new google.maps.LatLng((_a = locations[index]) === null || _a === void 0 ? void 0 : _a.lat(), (_b = locations[index]) === null || _b === void 0 ? void 0 : _b.lng()),\n                    stopover: true,\n                };\n                waypoints.push(waypoint);\n            }\n        }\n        // ルート検索のリクエストを送信\n        directionsService.route({\n            origin: origin,\n            destination: destination,\n            waypoints: waypoints,\n            travelMode: google.maps.TravelMode.DRIVING,\n        }, function (response, status) {\n            if (status === google.maps.DirectionsStatus.OK) {\n                // ルートを描画する\n                const directionsRenderer = new google.maps.DirectionsRenderer();\n                directionsRenderer.setDirections(response);\n                directionsRenderer.setMap(map);\n            }\n            else {\n                window.alert('Directions request failed due to ' + status);\n            }\n        });\n    })\n        .catch((error) => {\n        console.error(error);\n    });\n}\n;\n// 住所→緯度経度に変換\nfunction getLatLngFromAddress(address) {\n    return new Promise((resolve, reject) => {\n        const geocoder = new google.maps.Geocoder();\n        geocoder.geocode({ address: address }, (results, status) => {\n            if (status === google.maps.GeocoderStatus.OK && results.length > 0) {\n                const location = results[0].geometry.location;\n                resolve(location);\n            }\n            else {\n                reject(new Error(\"Geocodeが失敗しました。ステータス: \" + status));\n            }\n        });\n    });\n}\nwindow.initMap = initMap;\n"],"names":["origin","destination","waypoints","window","initMap","google","maps","DirectionsRenderer","directionsService","_directionsRenderer","promises","gm_plan","map","address","Promise","resolve","reject","Geocoder","geocode","results","status","GeocoderStatus","OK","length","location","geometry","Error","all","then","locations","_a","_b","forEach","index","lat","lng","center","undefined","Map","document","querySelector","zoom","disableDefaultUI","waypoint","LatLng","stopover","push","route","travelMode","TravelMode","DRIVING","response","DirectionsStatus","directionsRenderer","setDirections","setMap","alert","error","console","calculateAndDisplayRoute","DirectionsService"],"sourceRoot":""}